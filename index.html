<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a2e">
    <title>üìç –ù–∞–≤–∏–≥–∞—Ç–æ—Ä –¥–ª—è iPhone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* iOS-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }

        html {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #000;
            color: white;
            height: 100vh;
            height: -webkit-fill-available;
            width: 100vw;
            overflow: hidden;
            position: fixed;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
        }

        /* iOS –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã */
        .safe-area {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            height: -webkit-fill-available;
            width: 100vw;
            background: #000;
            position: relative;
        }

        /* –í–µ—Ä—Ö–Ω–∏–π –±–∞—Ä iOS-—Å—Ç–∏–ª—å */
        .status-bar {
            height: 44px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-time {
            font-weight: 600;
            font-size: 15px;
        }

        .status-icons {
            position: absolute;
            right: 16px;
            display: flex;
            gap: 5px;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞ */
        .nav-header {
            padding: 16px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #007AFF, #5856D6);
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .nav-text h1 {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .nav-text p {
            font-size: 13px;
            opacity: 0.7;
            margin-top: 2px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #000;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã */
        .map-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            overflow: hidden;
            touch-action: none;
        }

        #mapCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
            background: #000;
        }

        /* –°—Ç—Ä–µ–ª–∫–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è */
        .location-arrow {
            position: absolute;
            width: 60px;
            height: 60px;
            z-index: 100;
            pointer-events: none;
            filter: drop-shadow(0 0 10px rgba(0, 122, 255, 0.5));
            transition: transform 0.3s ease;
        }

        .arrow-icon {
            width: 100%;
            height: 100%;
        }

        /* –ü–∞–Ω–µ–ª—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç */
        .coordinates-panel {
            position: absolute;
            bottom: 120px;
            left: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 16px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 50;
        }

        .coord-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 15px;
        }

        .coord-label {
            opacity: 0.7;
        }

        .coord-value {
            font-family: 'Menlo', 'Monaco', monospace;
            font-weight: 600;
            color: #007AFF;
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 12px;
            z-index: 100;
        }

        .control-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 12px;
            padding: 14px;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-touch-callout: none;
            user-select: none;
        }

        .control-btn:active {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(0.95);
        }

        .control-btn i {
            font-size: 22px;
        }

        .control-btn span {
            font-size: 12px;
            font-weight: 500;
        }

        .control-btn.primary {
            background: linear-gradient(135deg, #007AFF, #5856D6);
        }

        /* –ü–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-panel {
            position: absolute;
            top: 16px;
            right: 16px;
            z-index: 50;
        }

        .upload-btn {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
        }

        .upload-btn:active {
            background: rgba(255, 255, 255, 0.1);
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã */
        .indicators {
            position: absolute;
            top: 16px;
            left: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 50;
        }

        .indicator {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 10px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .indicator i {
            color: #34C759;
            font-size: 16px;
        }

        .indicator span {
            opacity: 0.9;
        }

        /* –ö–æ–º–ø–∞—Å */
        .compass {
            position: absolute;
            top: 100px;
            right: 16px;
            width: 70px;
            height: 70px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }

        .compass-arrow {
            width: 4px;
            height: 25px;
            background: #FF3B30;
            border-radius: 2px;
            transform-origin: bottom;
        }

        /* –ú–∞—Å—à—Ç–∞–± */
        .zoom-controls {
            position: absolute;
            right: 16px;
            bottom: 200px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 50;
        }

        .zoom-btn {
            width: 50px;
            height: 50px;
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .zoom-btn:active {
            background: rgba(255, 255, 255, 0.1);
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è iOS-—Å—Ç–∏–ª—å */
        .notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 14px 20px;
            border-radius: 14px;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 300px;
            width: auto;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .notification i {
            font-size: 18px;
        }

        .notification.success i {
            color: #34C759;
        }

        .notification.error i {
            color: #FF3B30;
        }

        .notification.warning i {
            color: #FF9500;
        }

        /* –ó–∞–≥—Ä—É–∑—á–∏–∫ */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .loader.show {
            opacity: 1;
            pointer-events: all;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #007AFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ iPhone */
        @media (max-height: 700px) {
            .coordinates-panel {
                bottom: 100px;
                padding: 12px;
            }
            
            .control-panel {
                padding: 12px;
            }
            
            .control-btn {
                padding: 12px;
            }
        }

        @media (max-width: 400px) {
            .control-btn span {
                font-size: 11px;
            }
            
            .coordinates-panel {
                left: 8px;
                right: 8px;
            }
        }

        /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ iPhone X –∏ –Ω–æ–≤–µ–µ */
        @supports (padding: max(0px)) {
            .status-bar {
                padding-top: max(env(safe-area-inset-top), 20px);
                height: max(44px, env(safe-area-inset-top) + 44px);
            }
            
            .control-panel {
                padding-bottom: max(16px, env(safe-area-inset-bottom) + 16px);
            }
        }
    </style>
</head>
<body>
    <div class="app-container safe-area">
        <!-- –í–µ—Ä—Ö–Ω–∏–π —Å—Ç–∞—Ç—É—Å –±–∞—Ä (–∏–º–∏—Ç–∞—Ü–∏—è iOS) -->
        <div class="status-bar">
            <div class="status-time" id="currentTime">--:--</div>
            <div class="status-icons">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-three-quarters"></i>
            </div>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <div class="nav-header">
            <div class="nav-title">
                <div class="nav-icon">
                    <i class="fas fa-location-arrow"></i>
                </div>
                <div class="nav-text">
                    <h1>–ù–∞–≤–∏–≥–∞—Ç–æ—Ä</h1>
                    <p>–í–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                </div>
            </div>
            <div id="connectionStatus" class="indicator" style="position: static; padding: 8px 12px;">
                <i class="fas fa-circle"></i>
                <span>–ü–æ–∏—Å–∫...</span>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <div class="main-content">
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã -->
            <div class="map-container" id="mapContainer">
                <canvas id="mapCanvas"></canvas>
                
                <!-- –°—Ç—Ä–µ–ª–∫–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è -->
                <div class="location-arrow" id="locationArrow">
                    <svg class="arrow-icon" viewBox="0 0 100 100">
                        <defs>
                            <radialGradient id="arrowGrad" cx="50%" cy="50%">
                                <stop offset="0%" stop-color="#007AFF"/>
                                <stop offset="100%" stop-color="#0056CC"/>
                            </radialGradient>
                            <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                                <feGaussianBlur stdDeviation="3" result="blur"/>
                                <feMerge>
                                    <feMergeNode in="blur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <path d="M50 15 L60 50 L50 85 L40 50 Z" 
                              fill="url(#arrowGrad)" 
                              stroke="#FFFFFF" 
                              stroke-width="2"
                              filter="url(#glow)"/>
                        <circle cx="50" cy="50" r="12" fill="#FFFFFF" opacity="0.3"/>
                        <circle cx="50" cy="50" r="6" fill="#FFFFFF"/>
                    </svg>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã -->
            <div class="upload-panel">
                <label for="mapUpload" class="upload-btn">
                    <i class="fas fa-map"></i>
                    <span>–ú–æ—è –∫–∞—Ä—Ç–∞</span>
                </label>
                <input type="file" id="mapUpload" accept="image/*" style="display: none;">
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
            <div class="indicators">
                <div class="indicator" id="gpsIndicator">
                    <i class="fas fa-satellite"></i>
                    <span>GPS: –ü–æ–∏—Å–∫...</span>
                </div>
                <div class="indicator" id="accuracyIndicator">
                    <i class="fas fa-bullseye"></i>
                    <span>–¢–æ—á–Ω–æ—Å—Ç—å: -- –º</span>
                </div>
            </div>

            <!-- –ö–æ–º–ø–∞—Å -->
            <div class="compass" id="compass">
                <div class="compass-arrow" id="compassArrow"></div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–æ–º -->
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomIn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="zoom-btn" id="zoomOut">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="zoom-btn" id="resetView">
                    <i class="fas fa-crosshairs"></i>
                </button>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç -->
            <div class="coordinates-panel">
                <div class="coord-row">
                    <span class="coord-label">–®–∏—Ä–æ—Ç–∞:</span>
                    <span class="coord-value" id="latitude">‚Äî</span>
                </div>
                <div class="coord-row">
                    <span class="coord-label">–î–æ–ª–≥–æ—Ç–∞:</span>
                    <span class="coord-value" id="longitude">‚Äî</span>
                </div>
                <div class="coord-row">
                    <span class="coord-label">–°–∫–æ—Ä–æ—Å—Ç—å:</span>
                    <span class="coord-value" id="speed">‚Äî –∫–º/—á</span>
                </div>
                <div class="coord-row">
                    <span class="coord-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
                    <span class="coord-value" id="heading">‚Äî¬∞</span>
                </div>
            </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="control-panel">
            <button class="control-btn" id="locateBtn">
                <i class="fas fa-crosshairs"></i>
                <span>–ù–∞–π—Ç–∏ –º–µ–Ω—è</span>
            </button>
            <button class="control-btn" id="trackBtn">
                <i class="fas fa-play"></i>
                <span>–°–ª–µ–¥–∏—Ç—å</span>
            </button>
            <button class="control-btn" id="compassBtn">
                <i class="fas fa-compass"></i>
                <span>–ö–æ–º–ø–∞—Å</span>
            </button>
            <button class="control-btn primary" id="saveBtn">
                <i class="fas fa-save"></i>
                <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
            </button>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="notification" id="notification">
            <i class="fas fa-info-circle"></i>
            <span id="notificationText">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ -->
        <div class="loader" id="loader">
            <div class="spinner"></div>
        </div>
    </div>

    <script>
        // –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        class MobileNavigator {
            constructor() {
                this.canvas = document.getElementById('mapCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.locationArrow = document.getElementById('locationArrow');
                this.compassArrow = document.getElementById('compassArrow');
                
                this.userImage = null;
                this.isDragging = false;
                this.dragStart = { x: 0, y: 0 };
                this.imagePosition = { x: 0, y: 0 };
                this.scale = 1;
                this.minScale = 0.1;
                this.maxScale = 3;
                this.tracking = false;
                this.compassActive = false;
                this.watchId = null;
                
                this.currentLocation = null;
                this.heading = 0;
                this.lastPosition = null;
                
                this.init();
            }
            
            init() {
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => this.resizeCanvas(), 100);
                });
                
                this.setupEventListeners();
                this.updateTime();
                setInterval(() => this.updateTime(), 60000);
                
                this.showNotification('–ù–∞–≤–∏–≥–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
                this.requestLocation();
                
                // iOS PWA –ø–æ–¥–¥–µ—Ä–∂–∫–∞
                if ('standalone' in navigator) {
                    this.showNotification('–î–æ–±–∞–≤—å—Ç–µ –≤ —ç–∫—Ä–∞–Ω "–î–æ–º–æ–π" –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞', 'info', 4000);
                }
            }
            
            resizeCanvas() {
                const container = document.getElementById('mapContainer');
                this.canvas.width = container.clientWidth;
                this.canvas.height = container.clientHeight;
                
                if (this.userImage) {
                    this.centerImage();
                } else {
                    this.drawWelcomeScreen();
                }
            }
            
            drawWelcomeScreen() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // –§–æ–Ω
                const gradient = this.ctx.createLinearGradient(0, 0, this.canvas.width, this.canvas.height);
                gradient.addColorStop(0, '#000000');
                gradient.addColorStop(1, '#1a1a2e');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // –ò–∫–æ–Ω–∫–∞ –∏ —Ç–µ–∫—Å—Ç
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                // –ò–∫–æ–Ω–∫–∞ –ª–æ–∫–∞—Ü–∏–∏
                this.ctx.font = 'bold 80px FontAwesome';
                this.ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                this.ctx.textAlign = 'center';
                this.ctx.textBaseline = 'middle';
                this.ctx.fillText('üìç', centerX, centerY - 100);
                
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                this.ctx.font = 'bold 24px -apple-system, BlinkMacSystemFont';
                this.ctx.fillStyle = '#FFFFFF';
                this.ctx.fillText('–ú–æ–±–∏–ª—å–Ω—ã–π –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä', centerX, centerY);
                
                // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
                this.ctx.font = '16px -apple-system, BlinkMacSystemFont';
                this.ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                this.ctx.fillText('–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPS', centerX, centerY + 40);
                
                // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞
                this.ctx.fillStyle = 'rgba(0, 122, 255, 0.2)';
                this.ctx.fillRect(centerX - 100, centerY + 80, 200, 40);
                this.ctx.font = '15px -apple-system, BlinkMacSystemFont';
                this.ctx.fillStyle = '#007AFF';
                this.ctx.fillText('–ù–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ –º–µ–Ω—è"', centerX, centerY + 105);
            }
            
            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                if (this.userImage) {
                    this.ctx.save();
                    this.ctx.translate(this.imagePosition.x, this.imagePosition.y);
                    this.ctx.scale(this.scale, this.scale);
                    this.ctx.drawImage(this.userImage, 0, 0);
                    this.ctx.restore();
                    
                    this.drawGrid();
                } else {
                    this.drawWelcomeScreen();
                }
                
                this.updatePositionDisplay();
            }
            
            drawGrid() {
                this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                this.ctx.lineWidth = 1;
                
                const gridSize = 50 * this.scale;
                const offsetX = this.imagePosition.x % gridSize;
                const offsetY = this.imagePosition.y % gridSize;
                
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
                for (let x = -offsetX; x < this.canvas.width; x += gridSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, this.canvas.height);
                    this.ctx.stroke();
                }
                
                // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
                for (let y = -offsetY; y < this.canvas.height; y += gridSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(this.canvas.width, y);
                    this.ctx.stroke();
                }
                
                // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫—Ä–µ—Å—Ç
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                this.ctx.strokeStyle = 'rgba(255, 0, 0, 0.3)';
                this.ctx.lineWidth = 2;
                
                this.ctx.beginPath();
                this.ctx.moveTo(centerX - 15, centerY);
                this.ctx.lineTo(centerX + 15, centerY);
                this.ctx.moveTo(centerX, centerY - 15);
                this.ctx.lineTo(centerX, centerY + 15);
                this.ctx.stroke();
            }
            
            loadImage(file) {
                if (!file.type.match('image.*')) {
                    this.showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
                    return;
                }
                
                this.showLoader();
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        this.userImage = img;
                        this.centerImage();
                        this.showNotification(`–ö–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ${file.name}`, 'success');
                        this.hideLoader();
                        
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                        localStorage.setItem('lastMap', e.target.result);
                        localStorage.setItem('lastMapName', file.name);
                    };
                    img.onerror = () => {
                        this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
                        this.hideLoader();
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
            
            centerImage() {
                if (!this.userImage) return;
                
                this.imagePosition.x = (this.canvas.width - this.userImage.width * this.scale) / 2;
                this.imagePosition.y = (this.canvas.height - this.userImage.height * this.scale) / 2;
                this.draw();
            }
            
            zoomIn() {
                if (this.scale < this.maxScale) {
                    this.scale *= 1.2;
                    this.adjustZoomPosition(1.2);
                    this.draw();
                }
            }
            
            zoomOut() {
                if (this.scale > this.minScale) {
                    this.scale /= 1.2;
                    this.adjustZoomPosition(1/1.2);
                    this.draw();
                }
            }
            
            adjustZoomPosition(factor) {
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                this.imagePosition.x = centerX - (centerX - this.imagePosition.x) * factor;
                this.imagePosition.y = centerY - (centerY - this.imagePosition.y) * factor;
            }
            
            resetView() {
                this.scale = 1;
                this.centerImage();
                this.showNotification('–í–∏–¥ —Å–±—Ä–æ—à–µ–Ω', 'info');
            }
            
            requestLocation() {
                if (!navigator.geolocation) {
                    this.showNotification('–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
                    return;
                }
                
                this.showNotification('–û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ...', 'info');
                
                // –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ
                navigator.geolocation.getCurrentPosition(
                    (pos) => this.handleLocationSuccess(pos),
                    (err) => this.handleLocationError(err),
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
                
                // –ù–∞—á–∏–Ω–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
                this.startTracking();
            }
            
            startTracking() {
                if (this.watchId) {
                    navigator.geolocation.clearWatch(this.watchId);
                }
                
                this.watchId = navigator.geolocation.watchPosition(
                    (pos) => this.handleLocationSuccess(pos, true),
                    (err) => this.handleLocationError(err),
                    {
                        enableHighAccuracy: true,
                        timeout: 15000,
                        maximumAge: 1000,
                        maximumAge: 0
                    }
                );
                
                this.tracking = true;
                document.getElementById('trackBtn').innerHTML = '<i class="fas fa-pause"></i><span>–°—Ç–æ–ø</span>';
                this.showNotification('–°–ª–µ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ', 'success');
            }
            
            stopTracking() {
                if (this.watchId) {
                    navigator.geolocation.clearWatch(this.watchId);
                    this.watchId = null;
                }
                
                this.tracking = false;
                document.getElementById('trackBtn').innerHTML = '<i class="fas fa-play"></i><span>–°–ª–µ–¥–∏—Ç—å</span>';
                this.showNotification('–°–ª–µ–∂–µ–Ω–∏–µ –≤—ã–∫–ª—é—á–µ–Ω–æ', 'info');
            }
            
            handleLocationSuccess(position, isUpdate = false) {
                this.currentLocation = {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                    accuracy: position.coords.accuracy,
                    altitude: position.coords.altitude,
                    speed: position.coords.speed,
                    heading: position.coords.heading,
                    timestamp: new Date(position.timestamp)
                };
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.updateLocationDisplay();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–µ–ª–∫—É –∫–æ–º–ø–∞—Å–∞ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                if (this.currentLocation.heading !== null) {
                    this.heading = this.currentLocation.heading;
                    this.updateCompass();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
                if (this.userImage) {
                    this.updateArrowPosition();
                }
                
                if (!isUpdate) {
                    this.showNotification('–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ', 'success');
                }
                
                // –ü—É–ª—å—Å–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∏
                this.locationArrow.classList.add('pulse');
                setTimeout(() => {
                    this.locationArrow.classList.remove('pulse');
                }, 1000);
            }
            
            handleLocationError(error) {
                let message = '–û—à–∏–±–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏: ';
                
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        message += '–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Safari';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        message += '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
                        break;
                    case error.TIMEOUT:
                        message += '–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å—Ç–µ–∫–ª–æ';
                        break;
                    default:
                        message += '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞';
                }
                
                this.showNotification(message, 'error');
                document.getElementById('gpsIndicator').innerHTML = '<i class="fas fa-exclamation-triangle" style="color:#FF9500"></i><span>GPS: –û—à–∏–±–∫–∞</span>';
            }
            
            updateLocationDisplay() {
                if (!this.currentLocation) return;
                
                document.getElementById('latitude').textContent = this.currentLocation.latitude.toFixed(6);
                document.getElementById('longitude').textContent = this.currentLocation.longitude.toFixed(6);
                
                const speed = this.currentLocation.speed ? (this.currentLocation.speed * 3.6).toFixed(1) : '‚Äî';
                document.getElementById('speed').textContent = `${speed} –∫–º/—á`;
                
                const heading = this.currentLocation.heading !== null ? 
                    Math.round(this.currentLocation.heading) : '‚Äî';
                document.getElementById('heading').textContent = `${heading}¬∞`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
                document.getElementById('gpsIndicator').innerHTML = 
                    `<i class="fas fa-satellite" style="color:#34C759"></i><span>GPS: –ê–∫—Ç–∏–≤–µ–Ω</span>`;
                
                document.getElementById('accuracyIndicator').innerHTML = 
                    `<i class="fas fa-bullseye"></i><span>–¢–æ—á–Ω–æ—Å—Ç—å: ${Math.round(this.currentLocation.accuracy)} –º</span>`;
                
                document.getElementById('connectionStatus').innerHTML = 
                    `<i class="fas fa-circle" style="color:#34C759"></i><span>–í —Å–µ—Ç–∏</span>`;
            }
            
            updateArrowPosition() {
                // –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Å—Ç—Ä–µ–ª–∫–∞ –≤—Å–µ–≥–¥–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ, –Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ –∫–∞—Ä—Ç–µ
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                this.locationArrow.style.left = `${centerX - 30}px`;
                this.locationArrow.style.top = `${centerY - 30}px`;
                
                // –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫—É –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é
                if (this.heading !== null) {
                    this.locationArrow.style.transform = `translate(-50%, -50%) rotate(${this.heading}deg)`;
                }
            }
            
            updateCompass() {
                if (this.compassActive && this.heading !== null) {
                    this.compassArrow.style.transform = `rotate(${-this.heading}deg)`;
                }
            }
            
            toggleCompass() {
                this.compassActive = !this.compassActive;
                
                if (this.compassActive) {
                    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –¥–∞—Ç—á–∏–∫—É –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ (–¥–ª—è iOS)
                    if (typeof DeviceOrientationEvent !== 'undefined' && 
                        typeof DeviceOrientationEvent.requestPermission === 'function') {
                        
                        DeviceOrientationEvent.requestPermission()
                            .then(permissionState => {
                                if (permissionState === 'granted') {
                                    this.enableCompass();
                                } else {
                                    this.compassActive = false;
                                    this.showNotification('–î–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø–∞—Å—É –∑–∞–ø—Ä–µ—â–µ–Ω', 'error');
                                }
                            })
                            .catch(error => {
                                console.error(error);
                                this.compassActive = false;
                            });
                    } else {
                        this.enableCompass();
                    }
                } else {
                    this.disableCompass();
                }
            }
            
            enableCompass() {
                window.addEventListener('deviceorientation', this.handleDeviceOrientation.bind(this));
                document.getElementById('compassBtn').innerHTML = 
                    '<i class="fas fa-compass"></i><span>–ö–æ–º–ø–∞—Å: –í–ö–õ</span>';
                this.showNotification('–ö–æ–º–ø–∞—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω', 'success');
            }
            
            disableCompass() {
                window.removeEventListener('deviceorientation', this.handleDeviceOrientation.bind(this));
                document.getElementById('compassBtn').innerHTML = 
                    '<i class="fas fa-compass"></i><span>–ö–æ–º–ø–∞—Å</span>';
            }
            
            handleDeviceOrientation(event) {
                if (event.alpha !== null) {
                    this.heading = event.alpha;
                    this.updateCompass();
                    this.locationArrow.style.transform = `translate(-50%, -50%) rotate(${this.heading}deg)`;
                }
            }
            
            updatePositionDisplay() {
                if (!this.userImage) return;
                
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                const imgX = Math.round((centerX - this.imagePosition.x) / this.scale);
                const imgY = Math.round((centerY - this.imagePosition.y) / this.scale);
            }
            
            savePosition() {
                if (!this.userImage) {
                    this.showNotification('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç—É', 'warning');
                    return;
                }
                
                const data = {
                    imagePosition: { ...this.imagePosition },
                    scale: this.scale,
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('navigatorState', JSON.stringify(data));
                this.showNotification('–ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞', 'success');
            }
            
            loadSavedPosition() {
                const saved = localStorage.getItem('navigatorState');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.imagePosition = data.imagePosition;
                        this.scale = data.scale;
                        this.draw();
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∑–∏—Ü–∏–∏:', e);
                    }
                }
            }
            
            updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                document.getElementById('currentTime').textContent = timeString;
            }
            
            showNotification(message, type = 'info', duration = 3000) {
                const notification = document.getElementById('notification');
                const text = document.getElementById('notificationText');
                
                notification.className = `notification ${type}`;
                text.textContent = message;
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, duration);
            }
            
            showLoader() {
                document.getElementById('loader').classList.add('show');
            }
            
            hideLoader() {
                document.getElementById('loader').classList.remove('show');
            }
            
            setupEventListeners() {
                // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã
                document.getElementById('mapUpload').addEventListener('change', (e) => {
                    if (e.target.files[0]) {
                        this.loadImage(e.target.files[0]);
                    }
                });
                
                // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                document.getElementById('locateBtn').addEventListener('click', () => {
                    this.requestLocation();
                });
                
                document.getElementById('trackBtn').addEventListener('click', () => {
                    if (this.tracking) {
                        this.stopTracking();
                    } else {
                        this.startTracking();
                    }
                });
                
                document.getElementById('compassBtn').addEventListener('click', () => {
                    this.toggleCompass();
                });
                
                document.getElementById('saveBtn').addEventListener('click', () => {
                    this.savePosition();
                });
                
                // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
                document.getElementById('zoomIn').addEventListener('click', () => this.zoomIn());
                document.getElementById('zoomOut').addEventListener('click', () => this.zoomOut());
                document.getElementById('resetView').addEventListener('click', () => this.resetView());
                
                // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    if (this.userImage && e.touches.length === 1) {
                        this.isDragging = true;
                        this.dragStart.x = e.touches[0].clientX - this.imagePosition.x;
                        this.dragStart.y = e.touches[0].clientY - this.imagePosition.y;
                    }
                }, { passive: false });
                
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    if (this.isDragging && this.userImage && e.touches.length === 1) {
                        this.imagePosition.x = e.touches[0].clientX - this.dragStart.x;
                        this.imagePosition.y = e.touches[0].clientY - this.dragStart.y;
                        this.draw();
                    }
                }, { passive: false });
                
                this.canvas.addEventListener('touchend', () => {
                    this.isDragging = false;
                });
                
                // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∂–µ—Å—Ç–æ–º (–¥–ª—è iOS)
                let initialDistance = 0;
                
                this.canvas.addEventListener('touchstart', (e) => {
                    if (e.touches.length === 2 && this.userImage) {
                        initialDistance = Math.hypot(
                            e.touches[0].clientX - e.touches[1].clientX,
                            e.touches[0].clientY - e.touches[1].clientY
                        );
                    }
                });
                
                this.canvas.addEventListener('touchmove', (e) => {
                    if (e.touches.length === 2 && this.userImage && initialDistance > 0) {
                        e.preventDefault();
                        
                        const currentDistance = Math.hypot(
                            e.touches[0].clientX - e.touches[1].clientX,
                            e.touches[0].clientY - e.touches[1].clientY
                        );
                        
                        const delta = currentDistance - initialDistance;
                        if (Math.abs(delta) > 30) {
                            if (delta > 0) {
                                this.zoomIn();
                            } else {
                                this.zoomOut();
                            }
                            initialDistance = currentDistance;
                        }
                    }
                }, { passive: false });
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã
                const lastMap = localStorage.getItem('lastMap');
                if (lastMap) {
                    const img = new Image();
                    img.onload = () => {
                        this.userImage = img;
                        this.centerImage();
                        const mapName = localStorage.getItem('lastMapName') || '–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞';
                        this.showNotification(`–ó–∞–≥—Ä—É–∂–µ–Ω–∞ ${mapName}`, 'info');
                    };
                    img.src = lastMap;
                }
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
                setTimeout(() => this.loadSavedPosition(), 500);
                
                // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∂–µ—Å—Ç–æ–≤ iOS
                document.addEventListener('touchmove', (e) => {
                    if (e.target === this.canvas || e.target.closest('.map-container')) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–∞–∫ PWA
                window.addEventListener('load', () => {
                    if (window.navigator.standalone) {
                        console.log('–ó–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ PWA');
                    }
                });
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ iOS
            setTimeout(() => {
                window.navigator = new MobileNavigator();
            }, 100);
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∂–µ—Å—Ç–æ–º –Ω–∞ iOS
        document.addEventListener('gesturestart', (e) => {
            e.preventDefault();
        });
        
        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ PWA –Ω–∞ iOS
        if ('standalone' in navigator) {
            document.documentElement.style.height = '100%';
            document.body.style.height = '100%';
        }
    </script>
</body>
</html>